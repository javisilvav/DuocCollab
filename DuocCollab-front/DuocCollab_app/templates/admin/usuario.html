<div class="container py-5">
  <h2 class="mb-4 text-center">Panel de Administración: Usuario</h2>

  <!-- Formulario -->
  <div class="card mb-4 shadow">
    <div class="card-body">
      <form id="formRelacion">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" name="nombre" class="form-control" id="nombre" placeholder="Juanito" required>
          </div>
          <div class="col-md-6">
            <label for="apellido" class="form-label">Apellido</label>
            <input type="text" name="apellido" class="form-control" id="apellido" placeholder="Perez" required>
          </div>
          <div class="col-md-6">
            <label for="email" class="form-label">Correo</label>
            <input type="email" name="email" class="form-control" id="email" placeholder="hola@duocuc.cl" required>
          </div>
          <div class="col-md-6">
            <label for="password" class="form-label">Contraseña</label>
            <input type="password" name="password" class="form-control" id="password" placeholder="********" required>
          </div>
          <div class="col-md-6">
            <label for="carrera" class="form-label">Carrera</label>
            <select id="carrera" class="form-select" required>
              <option selected>Seleccione una carrera</option>
              {% for carrera in carreras %}
                <option value="{{ carrera.ID_CARRERA }}">{{ carrera.NOMBRE }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-6">
            <label for="intereses" class="form-label">Intereses</label>
            <select id="intereses" class="form-select" required>
              <option selected>Seleccione un interes</option>
              {% for etiqueta in etiquetas %}
                <option value="{{ etiqueta.ID_ETIQUETA }}">{{ etiqueta.NOMBRE }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-6">
            <label for="foto_perfil" class="form-label">Foto de perfil</label>
            <input type="file" class="form-control" id="archivo_perfil">
          </div>
          <div class="col-md-6">
            <label for="foto_portada" class="form-label">Foto de portada</label>
            <input type="file" class="form-control" id="archivo_portada">
          </div>
        </div>
        <div class="mt-4 text-end">
          <button type="submit" class="btn btn-primary">Agregar Usuario</button>
        </div>
      </form>
    </div>
  </div>


  <div class="card shadow">
    <div class="card-body">
      <h5 class="card-title">Usuarios existentes</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle" id="tablaRelaciones">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Correo</th>
              <th>Carrera</th>
              <th>Intereses</th>
              <th>Opciones</th>
            </tr>
          </thead>
          <tbody>
            {% for usuario in usuarios %}
              <tr>
                <td> {{ usuario.ID_USUARIO }} </td>
                <td> {{ usuario.NOMBRE }} </td>
                <td> {{ usuario.APELLIDO }} </td>
                <td> {{ usuario.CORREO }} </td>
                <td> {{ usuario.CARRERA.NOMBRE }} </td>
                <td> {{ usuario.INTERESES }} </td>
                <td>
                  <button class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#modalEditar{{ usuario.ID_USUARIO }}">
                    Editar
                  </button>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>







{% for usuario in usuarios %}
<div class="modal fade" id="modalEditar{{ usuario.ID_USUARIO }}" tabindex="-1" aria-labelledby="modalLabel{{ usuario.ID_USUARIO }}" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <form method="POST" action="{% url 'Usuarios' %}">
        {% csrf_token %}
        <input type="hidden" name="accion" value="editar">
        <input type="hidden" name="id_usuario" value="{{ usuario.ID_USUARIO }}">

        <div class="modal-header">
          <h5 class="modal-title" id="modalLabel{{ usuario.ID_USUARIO }}">Editar usuario {{ usuario.NOMBRE }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        

        <div class="modal-body">
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="nombre_actual" class="form-label">Nombre</label>
              <input type="text" name="nombre_actual" class="form-control" id="nombre_actual" value="{{ usuario.NOMBRE }}" disabled>
            </div>
            <div class="col-sm-6">
              <label for="apellido_actual" class="form-label">Apellido</label>
              <input type="text" name="apellido_actual" class="form-control" id="apellido_actual" value="{{ usuario.APELLIDO }}" disabled>
            </div>
          </div>

          <div class="row g-3">
            <div class="col-sm-6">
              <label for="correo_actual" class="form-label">Correo</label>
              <input type="text" name="correo_actual" class="form-control" id="correo_actual" value="{{ usuario.CORREO }}" disabled>
            </div>

            <div class="col-sm-6">
              <label for="intereses_actual" class="form-label">Intereses</label>
              <input type="text" name="intereses_actual" class="form-control" id="intereses_actual" value="{{ usuario.INTERESES }}" disabled>
            </div>
          </div>  



          <div class="row g-3">
            <div class="col-sm-6">
              <label for="nombre_nuevo" class="form-label">Nombre</label>
              <input type="text" name="nombre_nuevo" class="form-control" id="nombre_nuevo" >
            </div>
            <div class="col-sm-6">
              <label for="apellido_nuevo" class="form-label">Apellido</label>
              <input type="text" name="apellido_nuevo" class="form-control" id="apellido_nuevo" >
            </div>
          </div>

          <div class="row g-3">
            <div class="col-sm-6">
              <label for="correo_nuevo" class="form-label">Correo</label>
              <input type="text" name="correo_nuevo" class="form-control" id="correo_nuevo" >
            </div>

            <div class="col-sm-6">
              <label for="intereses_nuevo" class="form-label">Intereses</label>
              <input type="text" name="intereses_nuevo" class="form-control" id="intereses_nuevo" >
            </div>
          </div>  

          <div class="row g-3">
            <div class="col-sm-6">
              <label for="contrasena_nueva" class="form-label">Correo</label>
              <input type="text" name="contrasena_nueva" class="form-control" id="contrasena_nueva" >
            </div>
          </div>

        </div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-warning">Guardar cambios</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endfor %}
